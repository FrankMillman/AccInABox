<form name="cursor_form">
  <db_objects>
    <db_obj name="db_cur" table_name="db_cursors" parent="db_table"/>
  </db_objects>
  <mem_objects>
    <mem_obj name="column" descr="Cursor columns" parent="db_cur"
        sequence="[`seq`, [], null]">
      <mem_col col_name="cursor_name" data_type="TEXT" short_descr="Cursor name"
        long_descr="Cursor name" col_head="" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"
        fkey="[`db_cursors`, `cursor_name`, null, null, true]"/>
      <mem_col col_name="seq" data_type="INT" short_descr="Sequence"
        long_descr="Sequence" col_head="Seq" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="col_name" data_type="TEXT" short_descr="Column name"
        long_descr="Column name" col_head="Column" key_field="N"
        allow_null="false" allow_amend="false" max_len="0" db_scale="0"/>
      <mem_col col_name="lng" data_type="INT" short_descr="Length"
        long_descr="Column length" col_head="Lng" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="expand" data_type="BOOL" short_descr="Expand?"
        long_descr="Expand column to fill frame?" col_head="Exp?" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="readonly" data_type="BOOL" short_descr="Read only?"
        long_descr="Read only field?" col_head="R/O?" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="skip" data_type="BOOL" short_descr="Skip?"
        long_descr="Skip field?" col_head="Skip?" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="reverse" data_type="BOOL" short_descr="Reverse?"
        long_descr="Reverse sign? (numeric only)" col_head="Rev?" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="before" data_type="SXML" short_descr="Before input"
        long_descr="Action to take before input" col_head="Before" key_field="N"
        allow_null="true" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="dflt_val" data_type="SXML" short_descr="Default value"
        long_descr="Steps to derive default value" col_head="Default" key_field="N"
        allow_null="true" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="validation" data_type="SXML" short_descr="Validation"
        long_descr="Validation after input" col_head="Validation" key_field="N"
        allow_null="true" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="after" data_type="SXML" short_descr="After input"
        long_descr="Action to take after input" col_head="After" key_field="N"
        allow_null="true" allow_amend="true" max_len="0" db_scale="0"/>
    </mem_obj>
    <mem_obj name="filter" descr="Cursor filter" parent="db_cur"
        sequence="[`seq`, [], null]">
      <mem_col col_name="cursor_name" data_type="TEXT" short_descr="Cursor name"
        long_descr="Cursor name" col_head="" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"
        fkey="[`db_cursors`, `cursor_name`, null, null, true]"/>
      <mem_col col_name="seq" data_type="INT" short_descr="Sequence"
        long_descr="Sequence" col_head="Seq" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="test" data_type="TEXT" short_descr="Test"
        long_descr="where/and/or" col_head="Test" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="lbr" data_type="TEXT" short_descr="Left bracket"
        long_descr="Left bracket (if required)" col_head="(" key_field="N"
        allow_null="true" allow_amend="true" max_len="1" db_scale="0"/>
      <mem_col col_name="src" data_type="TEXT" short_descr="Source"
        long_descr="Source" col_head="Source" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="chk" data_type="TEXT" short_descr="Check"
        long_descr="Check to perform" col_head="Check" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="tgt" data_type="TEXT" short_descr="Target"
        long_descr="Target" col_head="Target" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="rbr" data_type="TEXT" short_descr="Right bracket"
        long_descr="Right bracket (if required)" col_head=")" key_field="N"
        allow_null="true" allow_amend="true" max_len="1" db_scale="0"/>
    </mem_obj>
    <mem_obj name="sequence" descr="Cursor sequence" parent="db_cur"
        sequence="[`seq`, [], null]">
      <mem_col col_name="cursor_name" data_type="TEXT" short_descr="Cursor name"
        long_descr="Cursor name" col_head="" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"
        fkey="[`db_cursors`, `cursor_name`, null, null, true]"/>
      <mem_col col_name="seq" data_type="INT" short_descr="Sequence"
        long_descr="Sequence" col_head="Seq" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0"/>
      <mem_col col_name="col_name" data_type="TEXT" short_descr="Column name"
        long_descr="Column name" col_head="Column" key_field="N"
        allow_null="false" allow_amend="false" max_len="0" db_scale="0"/>
      <mem_col col_name="descending" data_type="BOOL" short_descr="Descending?"
        long_descr="Descending?" col_head="Desc?" key_field="N"
        allow_null="false" allow_amend="true" max_len="0" db_scale="0" dflt_val="false"/>
    </mem_obj>
  </mem_objects>
  <input_params>
    <input_param name="db_table" type="data_obj" target="db_table" required="true"/>
  </input_params>
  <output_params/>
  <frame main_object="db_table">
    <toolbar/>
    <body>
      <block/>
      <panel/>
      <row/>
      <col/>
      <label value="Table:"/>
      <col/>
      <display fld="db_table.table_name" lng="160"/>
      <col/>
      <label value="Description:"/>
      <col/>
      <display fld="db_table.short_descr" lng="250"/>
      <block/>
      <grid data_object="db_cur" growable="true" num_grid_rows="3">
        <toolbar template="Grid"/>
        <cur_columns>
          <cur_col col_name="cursor_name" lng="120"/>
          <cur_col col_name="descr" lng="200" expand="true"/>
        </cur_columns>
        <cur_filter/>
        <cur_sequence>
          <cur_seq col_name="cursor_name" desc="false"/>
        </cur_sequence>
        <grid_methods template="Grid"/>
      </grid>
      <block/>
      <grid_frame main_object="db_cur">
        <body>
          <block/>
          <string value="Columns:" lng="75"/>
          <grid data_object="column" growable="true" num_grid_rows="3">
            <toolbar template="Grid"/>
            <cur_columns>
              <cur_col col_name="col_name" lng="120" expand="true"/>
              <cur_col col_name="lng" lng="40"/>
              <cur_col col_name="expand" lng="40"/>
              <cur_col col_name="readonly" lng="40"/>
              <cur_col col_name="skip" lng="40"/>
              <cur_col col_name="reverse" lng="40"/>
              <cur_col col_name="before" lng="100"/>
              <cur_col col_name="dflt_val" lng="100"/>
              <cur_col col_name="validation" lng="100"/>
              <cur_col col_name="after" lng="100"/>
            </cur_columns>
            <cur_filter/>
            <cur_sequence>
              <cur_seq col_name="seq" desc="false"/>
            </cur_sequence>
            <grid_methods template="Grid"/>
          </grid>
          <block/>
          <string value="Filter:" lng="75"/>
          <grid data_object="filter" growable="true" num_grid_rows="2">
            <toolbar template="Grid"/>
            <cur_columns>
              <cur_col col_name="test" lng="80"/>
              <cur_col col_name="lbr" lng="20"/>
              <cur_col col_name="src" lng="120"/>
              <cur_col col_name="chk" lng="60"/>
              <cur_col col_name="tgt" lng="120" expand="true"/>
              <cur_col col_name="rbr" lng="20"/>
            </cur_columns>
            <cur_filter/>
            <cur_sequence>
              <cur_seq col_name="seq" desc="false"/>
            </cur_sequence>
            <grid_methods template="Grid"/>
          </grid>
          <string value="Sequence:" lng="75"/>
          <grid data_object="sequence" growable="true" num_grid_rows="2">
            <toolbar template="Grid"/>
            <cur_columns>
              <cur_col col_name="col_name" lng="120" expand="true"/>
              <cur_col col_name="descending" lng="40"/>
            </cur_columns>
            <cur_filter/>
            <cur_sequence>
              <cur_seq col_name="seq" desc="false"/>
            </cur_sequence>
            <grid_methods template="Grid"/>
          </grid>
        </body>
        <button_row validate="true" template="Grid_Frame"/>
        <frame_methods template="Grid_Frame">
          <method name="on_start_frame" action="
            <<action>>
              <<pyfunc name=`custom.cursor_fields.load_cur_flds`/>>
            <</action>>
          "/>
          <method name="do_save" action="
            <<action>>
              <<check_children obj_name=`db_cur`/>>
              <<pyfunc name=`custom.cursor_fields.dump_cur_flds`/>>
              <<save_obj obj_name=`db_cur`/>>
            <</action>>
          "/>
          <method name="do_restore" action="
            <<action>>
              <<restore_obj obj_name=`db_cur`/>>
              <<pyfunc name=`custom.cursor_fields.load_cur_flds`/>>
            <</action>>
          "/>
        </frame_methods>
      </grid_frame>
    </body>
    <button_row validate="true">
      <button btn_id="btn_rgt" btn_label="Close" btn_enabled="true"
        btn_validate="false" btn_default="true" lng="60" action="
          <<action>>
             <<call method=`on_req_close`/>>
          <</action>>
        "/>
    </button_row>
    <frame_methods template="Setup_Form"/>
  </frame>
</form>
